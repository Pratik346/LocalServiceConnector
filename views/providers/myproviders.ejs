<% layout("/layouts/boilerplate") %>

<style>
  .profile-card {
    border-radius: 18px;
    overflow: hidden;
  }
  .profile-img {
    height: 1000px;
    width: 100%;
    object-fit: cover;
  }

  .status-badge {
    position: absolute;
    top: 18px;
    right: 18px;
    padding: 8px 16px;
    border-radius: 22px;
    font-size: 0.9rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .status-approved {
    background: #dcfce7;
    color: #166534;
    box-shadow: 0 4px 12px rgba(22, 101, 52, 0.25);
  }

  .status-pending {
    background: #fef9c3;
    color: #854d0e;
    box-shadow: 0 4px 12px rgba(133, 77, 14, 0.25);
  }

  .info-badge {
    background: #f0fdf4;
    padding: 10px 14px;
    border-radius: 12px;
    margin-bottom: 10px;
    color: #166534;
    font-size: 0.95rem;
  }

  @media (max-width: 768px) {
    .profile-img {
      height: 400px;
    }

    .card-body {
      padding: 1.2rem;
    }

    .action-buttons {
      flex-direction: column;
      gap: 10px;
    }
  }
</style>

<div class="container mt-4 mt-md-5">

  <% if (!provider) { %>
    <div class="card shadow-sm p-4 p-md-5 text-center">
      <i class="fa-solid fa-user-plus fa-3x text-success mb-3"></i>
      <h3 class="fw-bold">Register as a Service Provider</h3>
      <p class="text-muted">
        You haven't created your service provider profile yet.
      </p>
      <a href="/providers/new" class="btn btn-success mt-3">
        Create Profile
      </a>
    </div>

  <% } else { %>

  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-8">
      <div class="card profile-card shadow">
        <div class="position-relative">
          <img src="<%= provider.image.url %>" class="profile-img">

          <% if (provider.status === "approved") { %>
            <span class="status-badge status-approved">
              <i class="fa-solid fa-circle-check"></i> Approved
            </span>
          <% } else { %>
            <span class="status-badge status-pending">
              <i class="fa-solid fa-clock"></i> Pending
            </span>
          <% } %>
        </div>

        <div class="card-body">
          <h3 class="fw-bold text-center text-success mb-4">
            <%= provider.name %>
          </h3>

          <div class="info-badge"><strong>Work:</strong> <%= provider.typeofwork %></div>
          <div class="info-badge"><strong>Experience:</strong> <%= provider.experience %> years</div>
          <div class="info-badge"><strong>Average Price:</strong> â‚¹<%= provider.avgprice %></div>
          <div class="info-badge"><strong>Location:</strong> <%= provider.location %></div>
          <div class="info-badge"><strong>Email:</strong> <%= provider.email %></div>
          <div class="info-badge"><strong>Contact:</strong> <%= provider.contactNumber %></div>

          <hr>

          <div class="d-flex justify-content-between action-buttons">
            <a
              href="/providers/<%= provider._id %>/edit"
              class="btn btn-outline-primary"
            >
              <i class="fa-solid fa-pen me-1"></i> Edit Profile
            </a>

            <form
              method="POST"
              action="/providers/<%= provider._id %>?_method=DELETE"
            >
              <button class="btn btn-outline-danger w-100">
                <i class="fa-solid fa-trash me-1"></i> Delete Profile
              </button>
            </form>
          </div>

        </div>
      </div>

    </div>
  </div>

  <% } %>

</div>
